
# go-http-calculator

Yandex Golang Practice

## HTTP API –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä

### –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

- [–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [API](#api)
  - [–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è](#—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è)
  - [–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è](#–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)
  - [–í—ã—á–∏—Å–ª–µ–Ω–∏–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è](#–≤—ã—á–∏—Å–ª–µ–Ω–∏–µ-–≤—ã—Ä–∞–∂–µ–Ω–∏—è)
  - [–°–ø–∏—Å–æ–∫ –≤—ã—Ä–∞–∂–µ–Ω–∏–π](#—Å–ø–∏—Å–æ–∫-–≤—ã—Ä–∞–∂–µ–Ω–∏–π)
  - [–ü–æ–ª—É—á–µ–Ω–∏–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –ø–æ –µ–≥–æ ID](#–ø–æ–ª—É—á–µ–Ω–∏–µ-–≤—ã—Ä–∞–∂–µ–Ω–∏—è-–ø–æ-–µ–≥–æ-id)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞)
- [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç](#–∫–∞–∫-—ç—Ç–æ-—Ä–∞–±–æ—Ç–∞–µ—Ç)
  - [–°–µ—Ä–≤–µ—Ä (–û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä)](#—Å–µ—Ä–≤–µ—Ä-–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä)
    - [–ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã /api/v1/calculate](#–ø—Ä–∏–Ω—Ü–∏–ø-—Ä–∞–±–æ—Ç—ã-apiv1calculate)
    - [–ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã /api/v1/expressions](#–ø—Ä–∏–Ω—Ü–∏–ø-—Ä–∞–±–æ—Ç—ã-apiv1expressions)
    - [–ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã /api/v1/expressions/{id}](#–ø—Ä–∏–Ω—Ü–∏–ø-—Ä–∞–±–æ—Ç—ã-apiv1expressionsid)
    - [–ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã /internal/task](#–ø—Ä–∏–Ω—Ü–∏–ø-—Ä–∞–±–æ—Ç—ã-internaltask)
  - [–ê–≥–µ–Ω—Ç](#–∞–≥–µ–Ω—Ç)
    - [–ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ (fetchTask)](#–ø–æ–ª—É—á–µ–Ω–∏–µ-–∑–∞–¥–∞—á–∏-fetchtask)
    - [–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ (executeTask)](#–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ-–∑–∞–¥–∞—á–∏-executetask)
    - [–û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (sendResult)](#–æ—Ç–ø—Ä–∞–≤–∫–∞-—Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞-sendresult)
    - [–ó–∞–ø—É—Å–∫ –≤–æ—Ä–∫–µ—Ä–æ–≤ (RunGoroutines)](#–∑–∞–ø—É—Å–∫-–≤–æ—Ä–∫–µ—Ä–æ–≤-rungoroutines)
  - [Front-end](#front-end)

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ë–∞–∑–æ–≤—ã–µ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (`+`, `-`, `*`, `/`)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–µ—Å—è—Ç–∏—á–Ω—ã—Ö —á–∏—Å–µ–ª (–Ω–∞–ø—Ä–∏–º–µ—Ä, `3.14`)
- –£—á–∏—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–π (—Å–∫–æ–±–∫–∏, —É–º–Ω–æ–∂–µ–Ω–∏–µ, –¥–µ–ª–µ–Ω–∏–µ)
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤, —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏ –æ—à–∏–±–æ–∫

## API

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è

**Endpoint:** `POST /api/v1/register`

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:** `Content-Type: application/json`

#### –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤

**–ó–∞–ø—Ä–æ—Å:**

```json
{
  "login": "test_user", "password": "qwerty"
}
```

**–û—Ç–≤–µ—Ç (Status 200 OK):**

```json
// –ü—É—Å—Ç–æ–µ —Ç–µ–ª–æ
```

---

**–ó–∞–ø—Ä–æ—Å (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –µ—Å—Ç—å):**

```json
{
  "login": "test_user", "password": "qwerty"
}
```

**–û—Ç–≤–µ—Ç (Status 400 Bad Request):**

```json
{
  "error": "user already exists"
}
```

---

**–ó–∞–ø—Ä–æ—Å (–ø—É—Å—Ç—ã–µ –ø–æ–ª—è):**

```json
{
  "login": "", "password": ""
}
```

**–û—Ç–≤–µ—Ç (Status 401 Unauthorized):**

```json
{
  "error": "login or password can't be empty"
}
```

---

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

**Endpoint:** `POST /api/v1/login`

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:** `Content-Type: application/json`

#### –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤

**–ó–∞–ø—Ä–æ—Å (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –µ—Å—Ç—å):**

```json
{
  "login": "test_user", "password": "qwerty"
}
```

**–û—Ç–≤–µ—Ç (Status 200 OK):**

```json
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3NDY5OTA3MzMsImlhdCI6MTc0Njk5MDYxMywibmFtZSI6MSwibmJmIjoxNzQ2OTkwNjEzfQ.50OU0cLlqjszPRSA9jeXBA_FIgQNK6R8LbFvYe9lvWU"
}
```

---

**–ó–∞–ø—Ä–æ—Å (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç):**

```json
{
  "login": "test", "password": "qwerty"
}
```

**–û—Ç–≤–µ—Ç (Status 401 Unauthorized):**

```json
{
  "error": "user not found"
}
```

---

**–ó–∞–ø—Ä–æ—Å (–Ω–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å):**

```json
{
  "login": "test_user", "password": "maybe_this"
}
```

**–û—Ç–≤–µ—Ç (Status 401 Unauthorized):**

```json
{
  "error": "invalid password"
}
```

---

### –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è

**Endpoint:** `POST /api/v1/calculate`

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:** `Content-Type: application/json`

**–í –∑–∞–≥–æ–ª–æ–≤–∫–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å:** `Bearer <TOKEN>`

#### –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤

**–ó–∞–ø—Ä–æ—Å:**

```json
{
  "expression": "2+2"
}
```

**–û—Ç–≤–µ—Ç (Status 202 Accepted):**

```json
{
  "id": 1
}
```

---

**–ó–∞–ø—Ä–æ—Å —Å –æ—à–∏–±–∫–æ–π:**

```json
{
  "expression": "2+"
}
```

**–û—Ç–≤–µ—Ç (Status 422 Unprocessable Entity):**

```json
{
  "error": "unprocessable entity"
}
```

---

**–ó–∞–ø—Ä–æ—Å —Å –æ—à–∏–±–∫–æ–π –≤—ã—Ä–∞–∂–µ–Ω–∏—è:**

```json
{
  "expression": "2-2+"
}
```

**–û—Ç–≤–µ—Ç (Status 500 Internal Server Error):**

```json
{
  "error": "failed to create tasks: not enough operands for operator: +"
}
```

---

### –°–ø–∏—Å–æ–∫ –≤—ã—Ä–∞–∂–µ–Ω–∏–π

**Endpoint:** `GET /api/v1/expressions`

**–í –∑–∞–≥–æ–ª–æ–≤–∫–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å:** `Bearer <TOKEN>`

#### –ü—Ä–∏–º–µ—Ä—ã –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –∑–∞–ø—Ä–æ—Å

```json
{
    "expressions": [
        {
            "id": 1,
            "expression": "2+2",
            "status": "done",
            "result": 4
        },
        {
            "id": 2,
            "expression": "2/0",
            "status": "error",
            "result": 0,
            "error": "division by zero"
        },
        {
            "id": 3,
            "expression": "(3 + 5) * (2 - 6) / (4 + 7) * (8 - 3) + (10 / (2 + 3)) - (4 * (5 - 2)) + (12 / (3 + 1)) * 2 ",
            "status": "computing",
            "result": 0
        }
    ]
}
```

–£ –≤—ã—Ä–∞–∂–µ–Ω–∏–π –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç–∞—Ç—É—Å–æ–≤:

- pending - –≤ –æ—á–µ—Ä–µ–¥–∏ –Ω–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ
- computing - –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç
- done - —É—Å–ø–µ—à–Ω–æ –≤—ã—á–∏—Å–ª–µ–Ω–Ω–æ
- error - –≤–æ –≤—Ä–µ–º—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞(–µ—Å–ª–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ)

---

### –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –ø–æ –µ–≥–æ ID

**Endpoint:** `GET /api/v1/expressions/{id}`

**–í –∑–∞–≥–æ–ª–æ–≤–∫–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å:** `Bearer <TOKEN>`

#### –ü—Ä–∏–º–µ—Ä—ã –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –∑–∞–ø—Ä–æ—Å

**–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π ID:**

```text
/api/v1/expressions/-2
```

**–û—Ç–≤–µ—Ç:**

```json
{
  "error": "expression not found"
}
```

---

**–ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π ID:**

```text
/api/v1/expressions/2
```

**–û—Ç–≤–µ—Ç:**

```json
{
  "id": 2,
  "expression": "(3 + 5) * (2 - 6) / (4 + 7) * (8 - 3) + (10 / (2 + 3)) - (4 * (5 - 2)) + (12 / (3 + 1)) * 2 ",
  "status": "done",
  "result": -18.545455
}
```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å –ø–æ–º–æ—â—å—é `git clone`:

```bash
# ssh
git clone git@github.com:MoodyShoo/go-http-calculator-2025.git
# https 
https://github.com/MoodyShoo/go-http-calculator-2025.git
```

2. –ü–µ—Ä–µ–π—Ç–∏ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

```bash
cd go-http-calculator-2025
```

3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
go mod tidy
```

4. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é HTTP —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ –ø–æ—Ä—Ç—É 8080.
   - –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞ Windows:

     ```cmd
     set PORT=3000
     ```

     –∏–ª–∏

     ```powershell
     $env:PORT=3000;
     ```

   - –ò–∑–º–µ–Ω–∏—Ç—å –≤ Linux:

      ```bash
       PORT=1234
      ```

    –î–ª—è —Å–µ—Ä–≤–µ—Ä–∞ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
    - TIME_ADDITION_MS - –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–ª–æ–∂–µ–Ω–∏—è
    - TIME_SUBTRACTION_MS - –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—ã—á–∏—Ç–∞–Ω–∏—è
    - TIME_MULTIPLICATIONS_MS - –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —É–º–Ω–æ–∂–µ–Ω–∏—è
    - TIME_DIVISIONS_MS - –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–µ–ª–µ–Ω–∏—è

    –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∑–Ω–∞—á–µ–Ω–∏—è –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ä–∞–≤–Ω–æ 1000 millisec.

    ---

    –î–ª—è –∞–≥–µ–Ω—Ç–∞ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
    - ORCHESTARTOR_ADDRESS - –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞ gRPC (–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é localhost)
    - ORCHESTARTOR_PORT - –∞–¥—Ä–µ—Å –ø–æ—Ä—Ç–∞ gRPC (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 5000)
    - COMPUTING_POWER - –≤–æ–ª-–≤–æ –≤–æ—Ä–∫–µ—Ä–æ–≤ (–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é 2)

5. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä:

```text
go run cmd/server/main.go
```

–ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–≥–µ–Ω—Ç–∞:

```text
go run cmd/agent/main.go
```

6. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
   –°–æ—á–µ—Ç–∞–Ω–∏–µ –∫–ª–∞–≤–∏—à `Ctrl + C`

## –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

-Windows

```cmd
curl -X POST http://127.0.0.1:8080/api/v1/calculate \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer <—Ç–≤–æ–π_—Ç–æ–∫–µ–Ω>" \
  -d "{\"expression\": \"2 + 2\"}"
```

-Linux

```bash
curl -X POST http://127.0.0.1:8080/api/v1/calculate \
-H "Content-Type: application/json" \
-H "Authorization: Bearer <—Ç–≤–æ–π_—Ç–æ–∫–µ–Ω>" \
-d '{"expression": "2 + 2"}'
```

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

```json
{"id": </id –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–ª-–≤–∞ –≤—ã—Ä–∞–∂–µ–Ω–∏–π –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö –¥–æ>}
```

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–¢–µ—Å—Ç–∞–º–∏ –ø–æ–∫—Ä—ã—Ç—ã:

- –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä - `/internal/orchestrator/orchestrator_test.go`
- –•—Ä–∞–Ω–∏–ª–∏—â–µ —Ç–æ–∫–µ–Ω–æ–≤ `/internal/auth/auth_test.go`
- –ê–ª–≥–æ—Ä–∏—Ç–º Shunting Yard - `/pkg/calculation/calculation_test.go`

- –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
  - –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é:

    ```bash
    cd <–∏–º—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –≤—ã—à–µ>
    ```

  - –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã:

    ```bash
    go test -v . 
    ```

  - –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞:
    - TestCalculateRoute
      - Valid_expression
      - Invalid_JSON
      - Invalid_expression
      - Invalid_expression
      - Malformed JSON
      - Missing_expression_field
      - Large_expression

    - TestExpressionsHandler
      - One_valid_expression
      - Multiple_valid_expressions
      - Empty_list

    - TestExpressionIdHandler
      - Valid_expression_ID
      - Invalid_expression_ID
      - Invalid_ID_format

  - –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è –ø–∞–∫–µ—Ç–∞ Calculation
    - TestShuntingYard
      - Valid_TwoSum
      - Valid_Expression_with_Priority
      - Valid_Expression_with_Minus
      - Valid_Expression_with_Parentheses
      - Invalid_Expression_(Mismatched_Parentheses)
      - Invalid_Expression_(Unknown_Character)

  - –ó–∞–ø—É—Å–∫ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤:

    ```bash
    go test -v -run=TestCalculateRoute/Valid_expression
    ```

    ```bash
    go test -v -run=TestShuntingYard/Valid_TwoSum
    ```

# –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

–ê—Ä—Ö–∏—Ç–µ–∫—É—Ç—Ä–Ω–æ –ø—Ä–æ–µ–∫—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö —á–∞—Å—Ç–µ–π:

- –°–µ—Ä–≤–µ—Ä (–û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä)
- –ê–≥–µ–Ω—Ç

## –°–µ—Ä–≤–µ—Ä (–û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä)

–£ —Å–µ—Ä–≤–µ—Ä–∞ –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—É–±–ª–∏—á–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

- `/api/v1/calculate`
- `/api/v1/expressions`
- `/api/v1/expressions/{id}`
- `/api/v1/register`
- `/api/v1/login`

---

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã `/api/v1/calculate`

1) –°–µ—Ä–≤–µ—Ä –ø—Ä–∏–Ω–∏–º–∞–µ—Ç POST –∑–∞–ø—Ä–æ—Å;
2) –î–µ–∫–æ–¥–∏—Ä—É–µ—Ç —Ç–µ–ª–æ –∏–∑ JSON –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—É Request;
3) –î–µ–ª–µ–≥–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É –Ω–∞–¥ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ–º –º–µ—Ç–æ–¥—É handleCalculateRequest;
4) –ò—Å–ø–æ–ª—å–∑—É—è –∞–ª–≥–æ—Ä–∏—Ç–º [Shunting Yard](https://youtu.be/y_snKkv0gWc?si=Ymv6muB49Du8upEK) –æ–Ω —Ä–∞–∑–±–∏–≤–∞–µ—Ç –≤—ã—Ä–∞–∂–µ–Ω–∏–µ;
5) –ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –±—ã–ª–æ —Ä–∞–∑–±–∏—Ç–æ, –æ–Ω —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –∑–∞–¥–∞—á–∏, –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ –∑–∞–≤–∏—Å–∏–º—ã–µ –∑–∞–¥–∞—á–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `task{id}` (–ò–º–µ–Ω–Ω–æ –ø–æ—ç—Ç–æ–º—É —É –º–µ–Ω—è arg1 –∏ arg2 —Å—Ç—Ä–æ–∫–∏ –∞ –Ω–µ —á–∏—Å–ª–∞);
6) –ü–æ—Å–ª–µ —á–µ–≥–æ –æ–Ω —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –µ–≥–æ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö;
7) –í –∫–æ–Ω—Ü–µ –≤ —Å–ª–∞–π—Å –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤—Å–µ —Ç–∞—Å–∫–∏.
![CalcHandler](https://github.com/user-attachments/assets/57b88336-372b-4324-912e-c9c9ffed693d)

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã `/api/v1/expressions`

1) –°–µ—Ä–≤–µ—Ä –ø—Ä–∏–Ω–∏–º–∞–µ—Ç GET –∑–∞–ø—Ä–æ—Å;
2) –°—Ç—Ä—É–∫—Ç—É—Ä—É ExpressionsResponse –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ –ø–æ–ª–µ Expressions (—Å–ª–∞–π—Å –∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã Expression) –≤—Å–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è;
3) –°–æ—Ä—Ç–∏—Ä—É–µ—Ç –≤—ã—Ä–∞–∂–µ–Ω–∏—è –ø–æ ID;
4) –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON –º–∞—Å—Å–∏–≤

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã `/api/v1/expressions/{id}`

1) –°–µ—Ä–≤–µ—Ä –ø—Ä–∏–Ω–∏–º–∞–µ—Ç GET –∑–∞–ø—Ä–æ—Å;
2) –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –µ—Å—Ç—å –ª–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–¥ —Ç–∞–∫–∏–º ID;
3) –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É –∏–ª–∏ –∏–Ω—Ñ–æ—Ä–º–∞–∏—Ü—é –≤ JSON –≤ —Ñ–æ—Ä–º–∞—Ç–µ.

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã –∞–≥–µ–Ω—Ç–∞ –∏ —Å–µ—Ä–≤–µ—Ä–∞

 –ê–≥–µ–Ω—Ç –∏ —Å–µ—Ä–≤–µ—Ä —Å–æ–µ–¥–∏–Ω–µ–Ω—ã –º–µ–∂–¥—É —Å–æ–±–æ–π –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º gRPC

1) –°–µ—Ä–≤–µ—Ä —Å–º–æ—Ç—Ä–∏—Ç, –µ—Å—Ç—å –ª–∏ —É –Ω–µ–≥–æ –∑–∞–¥–∞—á–∏ –¥–ª—è –∞–≥–µ–Ω—Ç–∞. –ü—Ä–∏ —ç—Ç–æ–º –æ–Ω –∏—â—ë—Ç –∑–∞–¥–∞—á–∏ –≥–¥–µ –¥–≤–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ —è–≤–ª—è—é—Ç—Å—è —á–∏—Å–ª–∞–º–∏, –∞ –Ω–µ —Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥—Ä—É–≥–∏—Ö –∑–∞–¥–∞—á;
2) –°–µ—Ä–≤–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–¥–∞—á—É –≤ —Ñ–æ—Ä–º–∞—Ç–µ:

```json
{
  "id" id –∑–∞–¥–∞—á–∏:,
  "expression_id": id –≤—ã—Ä–∞–∂–µ–Ω–∏—è,
  "arg1": –∞—Ä–≥—É–º–µ–Ω—Ç 1,
  "arg2": –∞—Ä–≥—É–º–µ–Ω—Ç 2,
  "operation": –æ–ø–µ—Ä–∞—Ü–∏—è,
  "operation_time": –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è,
  "status": —Å—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏
}
```

- **POST**

1) –°–µ—Ä–≤–µ—Ä –¥–µ–∫–æ—Ä–¥–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –∑–∞–¥–∞—á—É –≤ —Å–≤–æ–µ—ë –º–∞–ø–µ;
2) –ü–æ—Å–ª–µ —á–µ–≥–æ –æ–Ω –∏—â—ë—Ç –≤—Å–µ –∑–∞–≤–∏—Å–∏–º—ã–µ –æ—Ç —ç—Ç–æ–π –∑–∞–¥–∞—á–∏ –¥—Ä—É–≥–∏–µ –∑–∞–¥–∞—á–∏, –∏ –ø—Ä–∏ –∏—Ö –Ω–∞–ª–∏—á–∏–∏ –∑–∞–º–µ–Ω—è–µ—Ç –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–≤–æ–∏—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π;
3) –ï—Å–ª–∏ —ç—Ç –æ–ø–æ—Å–ª–µ–¥–Ω—è—è –∑–∞–¥–∞—á–∞ –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è, —Ç–æ –æ–Ω –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç –≤—ã—Ä–∞–∂–µ–Ω–∏—é —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ —Å—Ç–∞—Ç—É—Å ``done``, –ø–æ—Å–ª–µ —á–µ–≥–æ —É–¥–∞–ª—è–µ—Ç –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å —ç—Ç–∏–º –≤—ã—Ä–∞–∂–µ–Ω–∏–µ–º –∑–∞–¥–∞—á–∏ –¥–ª—è –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –º–µ—Å—Ç–∞.

![TaskHandler](https://github.com/user-attachments/assets/099e42f9-d858-44d7-98fc-ebb77dcfa4ec)
![handleTaskget](https://github.com/user-attachments/assets/ade9ba89-d3cc-4830-a6c7-00791df67b13)
![handleTaskPost](https://github.com/user-attachments/assets/233a02ef-bbc0-44a0-9a90-f8d2e7b4702c)

## –ê–≥–µ–Ω—Ç

### –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ (fetchTask)

1) –ê–≥–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç gRPC –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä
2) –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å —É—Å–ø–µ—à–µ–Ω, —Ç–æ –∑–∞–¥–∞—á–∞ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –∞–≥–µ–Ω—Ç—É
3) –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –Ω–µ—É–¥–∞—á–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –∏–ª–∏ –≤–µ—Ä–Ω—É–ª –æ—à–∏–±–∫—É), –∞–≥–µ–Ω—Ç –ª–æ–≥–∏—Ä—É–µ—Ç –æ—à–∏–±–∫—É.

### –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ (executeTask)

1) –ê–≥–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫—É—é –æ–ø–µ—Ä–∞—Ü–∏—é, —É–∫–∞–∑–∞–Ω–Ω—É—é –≤ –∑–∞–¥–∞—á–µ.
2) –î–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è time.Timer, –∫–æ—Ç–æ—Ä—ã–π –æ–∂–∏–¥–∞–µ—Ç —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤ –∑–∞–¥–∞—á–µ –≤—Ä–µ–º—è (OperationTime).
3) –ï—Å–ª–∏ –æ–ø–µ—Ä–∞—Ü–∏—è –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å), –∞–≥–µ–Ω—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É.

- –û—à–∏–±–∫–∞

  ```json
  {
    "id": id –∑–∞–¥–∞—á–∏, 
    "result": —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã—Ä–∞–∂–µ–Ω–∏—è,
    "error": –æ—à–∏–±–∫–∞,
  }
  ```

- –†–µ–∑—É–ª—å—Ç–∞—Ç

   ```json
  {
    "id": id –∑–∞–¥–∞—á–∏, 
    "result": —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã—Ä–∞–∂–µ–Ω–∏—è,
  }
  ```

### –û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (sendResult)

1) –ê–≥–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ –æ–±—Ä–∞—Ç–Ω–æ –≤ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –ø–æ –∞–¥—Ä–µ—Å—É.
2) –ï—Å–ª–∏ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏ –≤–æ–∑–Ω–∏–∫–ª–∞ –æ—à–∏–±–∫–∞, –æ–Ω–∞ —Ç–∞–∫–∂–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä.

### –ó–∞–ø—É—Å–∫ –≤–æ—Ä–∫–µ—Ä–æ–≤ (RunGoroutines)

1) –ê–≥–µ–Ω—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –≥–æ—Ä—É—Ç–∏–Ω (–≤–æ—Ä–∫–µ—Ä–æ–≤), –∫–æ—Ç–æ—Ä—ã–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –ø–æ–ª—É—á–∞—é—Ç –∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç –∑–∞–¥–∞—á–∏.
2) –ö–∞–∂–¥—ã–π –≤–æ—Ä–∫–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–º —Ü–∏–∫–ª–µ, –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –∑–∞–ø—Ä–∞—à–∏–≤–∞—è –∑–∞–¥–∞—á–∏ —É –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞.

# Front-end

–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é –∏–ª–∏ —Å—á–∞—Å—Ç—å—é —è –Ω–µ –æ—á–µ–Ω—å –¥—Ä—É–∂—É —Å —Ñ—Ä–æ–Ω—Ç–æ–º, —è —á–∏—Å—Ç–æ backend dev üò¢
